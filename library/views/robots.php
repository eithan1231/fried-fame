<?php

// ======================================
//
// Fried Fame VPN Engine
// Created by Eithan
//
// https://github.com/eithan1231/fried-fame
// https://eithan.me/
//
// \library\views\robots.php
//
// ======================================


global $ff_request, $ff_response, $ff_context, $ff_config, $ff_router;
$ff_response->setHttpHeader('Content-Type', 'text/plain');

$language = $ff_context->getLanguage();

$removeBraces = function($string) {
	return preg_replace(
		"/\{[^)]+\}/",
		'',
		$string
	);
};
$generateRoute = function($routeName, $prefix) use($ff_router, $removeBraces) {
	$route = $ff_router->getRoute($routeName);
	if($route) {
		$paths = $route->getPaths();
		if($paths) {
			$return = "\r\n#{$routeName}\r\n";
			foreach ($paths as $path) {
				$return .= $prefix . $removeBraces($path) ."\r\n";
			}
			return $return;
		}
	}

	return false;
};
$allowRoute = function($routeName) use($ff_router, $removeBraces, $generateRoute) {
	return $generateRoute($routeName, 'Allow: ');
};
$disallowRoute = function($routeName) use($ff_router, $removeBraces, $generateRoute) {
	return $generateRoute($routeName, 'Disallow: ');
};



$ff_response->startOutputBuffer();

?>
# ==============================================================================
# Autogenerated Robots.txt file for <?= $ff_config->get('project-name') ?>.
# ==============================================================================

User-Agent: *
<?= $disallowRoute('containers_landing') ?>
<?= $disallowRoute('payments_gateways_paypal_redirect') ?>
<?= $disallowRoute('cp_landing') ?>
<?= $disallowRoute('emailverif') ?>
<?= $disallowRoute('post') ?>
<?= $allowRoute('tos') ?>
<?= $allowRoute('status') ?>
<?= $allowRoute('register') ?>
<?= $allowRoute('recovery') ?>
<?= $allowRoute('pp') ?>
<?= $allowRoute('mpgh') ?>
<?= $allowRoute('mlt') ?>
<?= $allowRoute('login') ?>
<?= $allowRoute('credits') ?>
<?= $allowRoute('contact') ?>

# Sitemap
Sitemap: <?= $ff_router->getPath('sitemap', [], ['mode' => 'host']) ?>
<?php

$ff_response->stopOutputBuffer();
